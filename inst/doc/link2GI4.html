<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>OTB Wrapper</title>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.6.0/build/styles/github.min.css">
<script src="https://cdn.jsdelivr.net/combine/gh/highlightjs/cdn-release@11.6.0/build/highlight.min.js,npm/@xiee/utils/js/load-highlight.js" async></script>



<style type="text/css">
body, td {
  font-family: sans-serif;
  background-color: white;
  font-size: 13px;
}
body {
  max-width: 800px;
  margin: auto;
  padding: 1em;
  line-height: 1.5;
}
tt, code, pre {
  font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}
a:visited { color: #80007f; }
pre, img { max-width: 100%; }
code {
  font-size: 92%;
  border: 1px solid #ccc;
}
code[class] { background-color: #F8F8F8; }
code.language-undefined { background-color: inherit; }
table {
  margin: auto;
  border-top: 1px solid #666;
  border-bottom: 1px solid #666;
}
table thead th { border-bottom: 1px solid #ddd; }
th, td { padding: 5px; }
thead, tfoot, tr:nth-child(even) { background: #eee; }
blockquote {
  color:#666;
  margin:0;
  padding-left: 1em;
  border-left: 0.5em #eee solid;
}
hr { border: 1px #ddd dashed; }

@media print {
  * {
    background: transparent !important;
    color: black !important;
    filter:none !important;
  }
  body {
    font-size: 12pt;
    max-width: 100%;
  }
  a, a:visited { text-decoration: underline; }
  hr {
    visibility: hidden;
    page-break-before: always;
  }
  pre, blockquote {
    padding-right: 1em;
    page-break-inside: avoid;
  }
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page :left { margin: 15mm 20mm 15mm 10mm; }
  @page :right { margin: 15mm 10mm 15mm 20mm; }
  p, h2, h3 { orphans: 3; widows: 3; }
  h2, h3 { page-break-after: avoid; }
}
</style>



</head>

<body>
<h1>A typical usecase for the Orfeo Toolbox wrapper</h1>
<p>link2GI supports the use of the Orfeo Toolbox with a listbased simple wrapper function. Actually two functions parse the modules and functions syntax dumps and generate a command list that is easy to modify with the necessary arguments.</p>
<p>Usually you have to get the module list first:</p>
<pre><code class="language-r"># link to the installed OTB 
otblink&lt;-link2GI::linkOTB()


# get the list of modules from the linked version
algo&lt;-parseOTBAlgorithms(gili = otblink)
</code></pre>
<p>Based on the modules of the current version of <code>OTB</code> you can then choose the module(s) you want to use.</p>
<pre><code class="language-r">## for the example we use the edge detection, 
algoKeyword&lt;- &quot;EdgeExtraction&quot;

## extract the command list for the choosen algorithm 
cmd&lt;-parseOTBFunction(algo = algoKeyword, gili = otblink)

## print the current command
print(cmd)
</code></pre>
<p>Admittedly this is a very straightforward and preliminary approach. Nevertheless it provids you a valid list of all <code>OTB</code> API calls that can easily manipulated for your needs. The following working example will give you an idea how to use it.</p>
<pre><code class="language-r">require(link2GI)
require(raster)
require(listviewer)

otblink&lt;-link2GI::linkOTB()
 projRootDir&lt;-tempdir()
 
data('rgb', package = 'link2GI')  
terra::plotRGB(rgb)
r&lt;-terra::writeRaster(rgb, 
              filename=file.path(projRootDir,&quot;test.tif&quot;),
              format=&quot;GTiff&quot;, overwrite=TRUE)
## for the example we use the edge detection, 
algoKeyword&lt;- &quot;EdgeExtraction&quot;

## extract the command list for the choosen algorithm 
cmd&lt;-parseOTBFunction(algo = algoKeyword, gili = otblink)

## get help using the convenient listviewer
listviewer::jsonedit(cmd$help)

## define the mandantory arguments all other will be default
cmd$input  &lt;- file.path(projRootDir,&quot;test.tif&quot;)
cmd$filter &lt;- &quot;touzi&quot;
cmd$channel &lt;- 2
cmd$out &lt;- file.path(projRootDir,paste0(&quot;out&quot;,cmd$filter,&quot;.tif&quot;))

## run algorithm
retStack&lt;-runOTB(cmd,gili = otblink)

## plot filter raster on the green channel
plot(retStack)
</code></pre>


<script src="https://cdn.jsdelivr.net/combine/npm/@xiee/utils/js/center-img.min.js" async></script>
</body>

</html>
